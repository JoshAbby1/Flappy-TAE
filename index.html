<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Flappy Bird Clone</title>
<style>
  body {
    margin: 0;
    background: #70c5ce;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: sans-serif;
    text-align: center;
    touch-action: none;
  }
  h1 { margin: 10px 0 5px; }
  p, #author { margin: 0 0 5px; }
  canvas { background: #70c5ce; display: block; margin-top: 10px; }
  #score { font-size: 24px; margin: 10px; }
  #startBtn, #restartBtn {
    padding: 8px 16px;
    font-size: 18px;
    cursor: pointer;
    margin-top: 10px;
  }
  #countdown {
    font-size: 48px;
    font-weight: bold;
    position: absolute;
    top: 40%;
    color: white;
    text-shadow: 2px 2px 5px black;
  }
  #gameContainer {
    position: relative;
  }
</style>
</head>
<body>
<h1>Flappy Bird Clone</h1>
<p>Tap or press space to flap. Avoid the pipes!</p>
<p id="author">Made by @nortydigitalcrew</p>

<button id="startBtn">Start</button>

<div id="gameUI" style="display:none;">
  <div id="score">Score: 0</div>
  <div id="gameContainer">
    <canvas id="gameCanvas"></canvas>
    <div id="countdown" style="display:none;"></div>
  </div>
  <button id="restartBtn">Restart</button>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const gameUI = document.getElementById('gameUI');
const startBtn = document.getElementById('startBtn');
const restartBtn = document.getElementById('restartBtn');
const countdownEl = document.getElementById('countdown');
const gameContainer = document.getElementById('gameContainer');

let bird, pipes, score, gameInterval, gravity, flapStrength;
let gameWidth, gameHeight;
const pipeWidth = 50;
const pipeGap = 120;
const pipeSpeed = 2;
let countdown = 3;
let gameStarted = false;

function resizeCanvas() {
  gameWidth = Math.min(window.innerWidth * 0.9, 400);
  gameHeight = window.innerHeight * 0.6;
  canvas.width = gameWidth;
  canvas.height = gameHeight;
}

function init() {
  resizeCanvas();
  bird = { x: 60, y: gameHeight/2, width: 20, height: 20, dy: 0 };
  pipes = [];
  score = 0;
  gravity = 0.5;
  flapStrength = -8;
  document.getElementById('score').innerText = 'Score: 0';
  pipes.push({ x: gameWidth, y: Math.random() * (gameHeight - pipeGap - 40) });
  gameStarted = false;
  showCountdown();
}

// Countdown before start
function showCountdown() {
  countdown = 3;
  countdownEl.style.display = 'block';
  countdownEl.innerText = countdown;
  const cdInterval = setInterval(() => {
    countdown--;
    if(countdown === 0) {
      countdownEl.style.display = 'none';
      gameStarted = true;
      gameInterval = setInterval(gameLoop, 20);
      clearInterval(cdInterval);
    } else {
      countdownEl.innerText = countdown;
    }
  }, 1000);
}

function flap() {
  if(gameStarted) bird.dy = flapStrength;
}

// Keyboard and touch
document.addEventListener('keydown', e => { if(e.code === 'Space') flap(); });
canvas.addEventListener('click', flap);
canvas.addEventListener('touchstart', flap);

function gameLoop() {
  if(!gameStarted) return;

  bird.dy += gravity;
  bird.y += bird.dy;

  // Move pipes
  for(let i = 0; i < pipes.length; i++) {
    pipes[i].x -= pipeSpeed;
  }

  // Add new pipes
  if(pipes[pipes.length-1].x < gameWidth - 200) {
    pipes.push({ x: gameWidth, y: Math.random() * (gameHeight - pipeGap - 40) });
  }

  // Remove offscreen pipes
  if(pipes[0].x + pipeWidth < 0) pipes.shift();

  // Check collisions
  for(let pipe of pipes) {
    if(bird.x < pipe.x + pipeWidth && bird.x + bird.width > pipe.x) {
      if(bird.y < pipe.y || bird.y + bird.height > pipe.y + pipeGap) {
        gameOver();
        return;
      }
    }
  }

  if(bird.y + bird.height > gameHeight || bird.y < 0) {
    gameOver();
    return;
  }

  // Increase score
  for(let pipe of pipes) {
    if(!pipe.passed && pipe.x + pipeWidth < bird.x) {
      score++;
      pipe.passed = true;
      document.getElementById('score').innerText = 'Score: ' + score;
    }
  }

  draw();
}

function draw() {
  ctx.clearRect(0, 0, gameWidth, gameHeight);

  // Draw bird
  ctx.fillStyle = 'yellow';
  ctx.fillRect(bird.x, bird.y, bird.width, bird.height);

  // Draw pipes
  ctx.fillStyle = 'green';
  for(let pipe of pipes) {
    ctx.fillRect(pipe.x, 0, pipeWidth, pipe.y);
    ctx.fillRect(pipe.x, pipe.y + pipeGap, pipeWidth, gameHeight - pipe.y - pipeGap);
  }
}

function gameOver() {
  clearInterval(gameInterval);
  gameStarted = false;
  alert('Game Over! Final Score: ' + score);
}

// Start and Restart buttons
startBtn.addEventListener('click', () => {
  startBtn.style.display = 'none';
  gameUI.style.display = 'block';
  init();
});

restartBtn.addEventListener('click', () => {
  clearInterval(gameInterval);
  init();
});

// Resize canvas
window.addEventListener('resize', () => {
  if(gameUI.style.display !== 'none') resizeCanvas();
});
</script>
</body>
</html>